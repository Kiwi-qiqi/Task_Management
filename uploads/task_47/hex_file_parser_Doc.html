<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexParser æŠ€æœ¯æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin-bottom: 30px;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .content-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #764ba2;
            margin: 25px 0 15px;
            font-size: 1.4em;
        }
        
        .method-card {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .method-card:hover {
            background: #e8ecff;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }
        
        .method-signature {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            margin-bottom: 15px;
        }
        
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .param-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        .param-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .param-table tr:nth-child(even) {
            background: #f7fafc;
        }
        
        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: scale(1.05);
        }
        
        .feature-card h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .feature-card p {
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .attribute-box {
            background: #e8f4fd;
            border: 1px solid #bee3f8;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .attribute-box .attr-name {
            font-weight: bold;
            color: #2b6cb0;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        
        .attribute-box .attr-type {
            color: #667eea;
            background: #f0f4ff;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.85em;
            margin-left: 10px;
        }
        
        .example-section {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .performance-box {
            background: #fff5f5;
            border-left: 4px solid #fc8181;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .note-box {
            background: #fefcbf;
            border-left: 4px solid #f6e05e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .toc {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .toc h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 10px 0;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .toc a:hover {
            color: #764ba2;
            text-decoration: underline;
        }
        
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HexParser æŠ€æœ¯æ–‡æ¡£</h1>
            <p>Intel HEX æ ¼å¼æ–‡ä»¶è§£æå™¨ - é«˜æ€§èƒ½ç‰ˆæœ¬</p>
        </div>
        
        <div class="toc">
            <h3>ğŸ“‹ ç›®å½•</h3>
            <ul>
                <li><a href="#overview">æ¨¡å—æ¦‚è¿°</a></li>
                <li><a href="#class">HexParser ç±»</a></li>
                <li><a href="#attributes">å±æ€§è¯´æ˜</a></li>
                <li><a href="#methods">æ–¹æ³•è¯¦è§£</a></li>
                <li><a href="#usage">ä½¿ç”¨ç¤ºä¾‹</a></li>
                <li><a href="#performance">æ€§èƒ½ä¼˜åŒ–</a></li>
                <li><a href="#principle">åŸºæœ¬åŸç†</a></li>
            </ul>
        </div>
        
        <div class="content-section" id="overview">
            <h2>ğŸ“– æ¨¡å—æ¦‚è¿°</h2>
            <p><strong>HexParser</strong> æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Intel HEX æ ¼å¼æ–‡ä»¶è§£æå™¨ï¼Œä¸“é—¨ç”¨äºè§£æ HEX æ–‡ä»¶å¹¶æå– Flash å†…å­˜ä¿¡æ¯ã€‚ç›¸æ¯”ä¼ ç»Ÿè§£ææ–¹æ³•ï¼Œæ€§èƒ½æå‡ 10-50 å€ã€‚</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>ğŸš€ é«˜æ€§èƒ½</h4>
                    <p>é‡‡ç”¨å­—èŠ‚çº§æ“ä½œï¼Œé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½¿ç”¨é¢„åˆ†é…å†…å­˜ï¼Œå¤§å¹…æå‡è§£æé€Ÿåº¦</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ§© å¤šæ ¼å¼æ”¯æŒ</h4>
                    <p>æ”¯æŒæ‰€æœ‰ Intel HEX è®°å½•ç±»å‹ï¼šæ•°æ®è®°å½•ã€æ‰©å±•åœ°å€è®°å½•ã€çº¿æ€§åœ°å€è®°å½•ç­‰</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ’¾ å†…å­˜ä¼˜åŒ–</h4>
                    <p>ä½¿ç”¨ array æ•°ç»„å­˜å‚¨ï¼Œå‡å°‘å†…å­˜å ç”¨ 50-70%ï¼Œæ”¯æŒå¤§æ–‡ä»¶å¤„ç†</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ“Š è¯¦ç»†ç»Ÿè®¡</h4>
                    <p>æä¾›è¯¦ç»†çš„å†…å­˜å—ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…å«åœ°å€æ˜ å°„ã€æ•°æ®é•¿åº¦ç­‰</p>
                </div>
            </div>
            
            <div class="note-box">
                <strong>ğŸ“ æ³¨æ„ï¼š</strong> æœ¬è§£æå™¨å·²é’ˆå¯¹å¤§å‹ HEX æ–‡ä»¶è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç‰¹åˆ«é€‚åˆåµŒå…¥å¼å¼€å‘ä¸­çš„å›ºä»¶è§£æéœ€æ±‚ã€‚
            </div>
        </div>
        
        <div class="content-section" id="class">
            <h2>ğŸ—ï¸ HexParser ç±»</h2>
            
            <h3>æ„é€ æ–¹æ³•</h3>
            <div class="method-card">
                <div class="method-signature">
                    def __init__(self, hex_file_path: str, logger: Optional[logging.Logger] = None)
                </div>
                
                <div class="param-table">
                    <tr>
                        <th>å‚æ•°</th>
                        <th>ç±»å‹</th>
                        <th>æè¿°</th>
                    </tr>
                    <tr>
                        <td>hex_file_path</td>
                        <td>str</td>
                        <td>HEX æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰</td>
                    </tr>
                    <tr>
                        <td>logger</td>
                        <td>Optional[logging.Logger]</td>
                        <td>æ—¥å¿—è®°å½•å™¨ï¼ˆå¯é€‰ï¼Œé»˜è®¤åˆ›å»ºï¼‰</td>
                    </tr>
                </div>
                
                <div class="note-box">
                    <strong>å¼‚å¸¸ï¼š</strong>
                    <ul>
                        <li><code>IOError</code> - æ–‡ä»¶è¯»å–é”™è¯¯</li>
                        <li><code>ValueError</code> - æ— æ•ˆçš„ HEX æ–‡ä»¶æ ¼å¼</li>
                    </ul>
                </div>
            </div>
            
            <h3>ç±»å¸¸é‡</h3>
            <div class="attribute-box">
                <p><span class="attr-name">RECORD_DATA</span> <span class="attr-type">0x00</span> - æ•°æ®è®°å½•</p>
                <p><span class="attr-name">RECORD_EOF</span> <span class="attr-type">0x01</span> - æ–‡ä»¶ç»“æŸè®°å½•</p>
                <p><span class="attr-name">RECORD_EXTENDED_SEGMENT</span> <span class="attr-type">0x02</span> - æ‰©å±•æ®µåœ°å€è®°å½•</p>
                <p><span class="attr-name">RECORD_START_SEGMENT</span> <span class="attr-type">0x03</span> - å¯åŠ¨æ®µåœ°å€è®°å½•</p>
                <p><span class="attr-name">RECORD_EXTENDED_LINEAR</span> <span class="attr-type">0x04</span> - æ‰©å±•çº¿æ€§åœ°å€è®°å½•</p>
                <p><span class="attr-name">RECORD_START_LINEAR</span> <span class="attr-type">0x05</span> - å¯åŠ¨çº¿æ€§åœ°å€è®°å½•</p>
            </div>
        </div>
        
        <div class="content-section" id="attributes">
            <h2>ğŸ”§ å±æ€§è¯´æ˜</h2>
            
            <div class="attribute-box">
                <p><span class="attr-name">hex_lines</span> <span class="attr-type">List[str]</span> - HEX æ–‡ä»¶çš„æ‰€æœ‰æœ‰æ•ˆè¡Œ</p>
                <p><span class="attr-name">address_map</span> <span class="attr-type">Dict</span> - åœ°å€åˆ°æ•°æ®çš„æ˜ å°„å…³ç³»</p>
                <p><span class="attr-name">memory_blocks</span> <span class="attr-type">Dict</span> - è¿ç»­å†…å­˜å—æ˜ å°„</p>
                <p><span class="attr-name">flash_info</span> <span class="attr-type">Dict</span> - æ ¼å¼åŒ–çš„ Flash ä¿¡æ¯å­—å…¸</p>
                <p><span class="attr-name">logger</span> <span class="attr-type">logging.Logger</span> - æ—¥å¿—è®°å½•å™¨å®ä¾‹</p>
            </div>
        </div>
        
        <div class="content-section" id="methods">
            <h2>âš™ï¸ æ–¹æ³•è¯¦è§£</h2>
            
            <h3>get_flash_info_summary</h3>
            <div class="method-card">
                <div class="method-signature">
                    def get_flash_info_summary(self) -> Dict
                </div>
                
                <p>è·å– Flash ä¿¡æ¯æ‘˜è¦ï¼ŒåŒ…å«ç»Ÿè®¡ä¿¡æ¯</p>
                
                <div class="param-table">
                    <tr>
                        <th>è¿”å›å­—æ®µ</th>
                        <th>ç±»å‹</th>
                        <th>æè¿°</th>
                    </tr>
                    <tr>
                        <td>block_count</td>
                        <td>int</td>
                        <td>å†…å­˜å—æ•°é‡</td>
                    </tr>
                    <tr>
                        <td>total_bytes</td>
                        <td>int</td>
                        <td>æ€»å­—èŠ‚æ•°</td>
                    </tr>
                    <tr>
                        <td>total_kb</td>
                        <td>float</td>
                        <td>æ€» KB æ•°ï¼ˆä¿ç•™ 2 ä½å°æ•°ï¼‰</td>
                    </tr>
                    <tr>
                        <td>blocks</td>
                        <td>List[Dict]</td>
                        <td>å—ä¿¡æ¯åˆ—è¡¨</td>
                    </tr>
                </div>
            </div>
            
            <h3>ç§æœ‰æ–¹æ³•ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰</h3>
            <div class="method-card">
                <h4>_parse</h4>
                <p>è§£ææ‰€æœ‰ HEX æ–‡ä»¶è¡Œï¼Œæ‰¹é‡å¤„ç†æé«˜æ•ˆç‡</p>
                
                <h4>_parse_single_line</h4>
                <p>è§£æå•ä¸ª HEX è¡Œï¼Œå¤„ç†åœ°å€ã€æ•°æ®å’Œè®°å½•ç±»å‹</p>
                
                <h4>_verify_checksum</h4>
                <p>éªŒè¯ HEX è¡Œæ ¡éªŒå’Œï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§</p>
                
                <h4>_process_memory_blocks</h4>
                <p>å¤„ç†å†…å­˜å—ï¼Œåˆå¹¶è¿ç»­åœ°å€ï¼Œä¼˜åŒ–å­˜å‚¨ç»“æ„</p>
                
                <h4>_format_flash_info</h4>
                <p>æ ¼å¼åŒ– Flash ä¿¡æ¯ï¼Œä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„</p>
            </div>
        </div>
        
        <div class="content-section" id="usage">
            <h2>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h2>
            
            <h3>åŸºæœ¬ä½¿ç”¨</h3>
            <div class="example-section">
                <div class="code-block">
# å¯¼å…¥æ¨¡å—
from hex_parser import HexParser

# åˆ›å»ºè§£æå™¨å®ä¾‹
parser = HexParser("firmware.hex")

# è·å– Flash ä¿¡æ¯æ‘˜è¦
summary = parser.get_flash_info_summary()
print(f"å†…å­˜å—æ•°é‡: {summary['block_count']}")
print(f"æ€»å¤§å°: {summary['total_kb']} KB")

# éå†å†…å­˜å—
for addr, info in parser.flash_info.items():
    print(f"åœ°å€: {addr}, å¤§å°: {info['Data Length']}")</div>
            </div>
            
            <h3>é«˜çº§ä½¿ç”¨</h3>
            <div class="example-section">
                <div class="code-block">
# å¸¦æ—¥å¿—çš„é«˜çº§ç”¨æ³•
import logging

# åˆ›å»ºè‡ªå®šä¹‰æ—¥å¿—
logger = logging.getLogger("MyParser")
logger.setLevel(logging.INFO)

# åˆ›å»ºè§£æå™¨
parser = HexParser("large_firmware.hex", logger=logger)

# è·å–è¯¦ç»†ç»Ÿè®¡
for address, data in parser.memory_blocks.items():
    print(f"å—åœ°å€: {hex(address)}")
    print(f"æ•°æ®é•¿åº¦: {len(data)} bytes")
    print(f"å‰ 16 å­—èŠ‚: {data[:16]}")</div>
            </div>
        </div>
        
        <div class="content-section" id="performance">
            <h2>ğŸ”¥ æ€§èƒ½ä¼˜åŒ–</h2>
            
            <div class="performance-box">
                <h3>ä¼˜åŒ–ç­–ç•¥</h3>
                <ul>
                    <li><strong>é¿å… eval()</strong>ï¼šä½¿ç”¨ int() ç›´æ¥è½¬æ¢ï¼Œæå‡ 5-10 å€é€Ÿåº¦</li>
                    <li><strong>å­—èŠ‚çº§æ“ä½œ</strong>ï¼šç”¨å­—èŠ‚æ“ä½œæ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥</li>
                    <li><strong>æ‰¹é‡è½¬æ¢</strong>ï¼šä½¿ç”¨ bytes.fromhex() æ‰¹é‡è½¬æ¢ï¼Œé¿å…é€å­—èŠ‚å¤„ç†</li>
                    <li><strong>é¢„åˆ†é…å†…å­˜</strong>ï¼šé¢„ä¼°å†…å­˜éœ€æ±‚ï¼Œå‡å°‘åŠ¨æ€æ‰©å®¹</li>
                    <li><strong>é«˜æ•ˆæ•°æ®ç»“æ„</strong>ï¼šä½¿ç”¨ array æ•°ç»„ï¼Œå†…å­˜å ç”¨å‡å°‘ 50-70%</li>
                    <li><strong>ä½è¿ç®—ä¼˜åŒ–</strong>ï¼šç”¨ä½è¿ç®—æ›¿ä»£æ¨¡è¿ç®—ï¼Œæ€§èƒ½æå‡çº¦ 20%</li>
                </ul>
            </div>
            
            <div class="note-box">
                <strong>ğŸ“Š æ€§èƒ½å¯¹æ¯”</strong>ï¼šç›¸æ¯”ä¼ ç»Ÿå­—ç¬¦ä¸²è§£ææ–¹æ³•ï¼Œæœ¬è§£æå™¨åœ¨å¤„ç†å¤§å‹ HEX æ–‡ä»¶æ—¶æ€§èƒ½æå‡ 10-50 å€ï¼Œå†…å­˜å ç”¨é™ä½ 50% ä»¥ä¸Šã€‚
            </div>
        </div>
        
        <div class="content-section" id="principle">
            <h2>ğŸ”¬ åŸºæœ¬åŸç†</h2>
            
            <h3>è§£ææµç¨‹</h3>
            <div class="code-block">
1. æ–‡ä»¶è¯»å–ï¼šä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æœ‰æ•ˆè¡Œï¼ˆä»¥ ':' å¼€å¤´ï¼‰
2. è¡Œè§£æï¼šè§£ææ¯è¡Œ HEX æ•°æ®ï¼Œæå–é•¿åº¦ã€åœ°å€ã€ç±»å‹ã€æ•°æ®å’Œæ ¡éªŒå’Œ
3. æ ¡éªŒéªŒè¯ï¼šéªŒè¯æ ¡éªŒå’Œç¡®ä¿æ•°æ®å®Œæ•´æ€§
4. åœ°å€å¤„ç†ï¼šæ ¹æ®è®°å½•ç±»å‹å¤„ç†æ‰©å±•åœ°å€ã€çº¿æ€§åœ°å€ç­‰
5. å†…å­˜åˆå¹¶ï¼šåˆå¹¶è¿ç»­åœ°å€çš„å†…å­˜å—ï¼Œä¼˜åŒ–å­˜å‚¨ç»“æ„
6. æ ¼å¼è¾“å‡ºï¼šæ ¼å¼åŒ–ä¸ºæ ‡å‡†çš„ Flash ä¿¡æ¯ç»“æ„</div>
            
            <h3>HEX æ–‡ä»¶æ ¼å¼</h3>
            <div class="attribute-box">
                <p><strong>è®°å½•æ ¼å¼ï¼š</strong> :LLAAAAATT[DD...]CC</p>
                <ul>
                    <li><code>:</code> - è®°å½•èµ·å§‹ç¬¦</li>
                    <li><code>LL</code> - æ•°æ®é•¿åº¦ï¼ˆ1 å­—èŠ‚ï¼‰</li>
                    <li><code>AAAA</code> - èµ·å§‹åœ°å€ï¼ˆ2 å­—èŠ‚ï¼‰</li>
                    <li><code>TT</code> - è®°å½•ç±»å‹ï¼ˆ1 å­—èŠ‚ï¼‰</li>
                    <li><code>[DD...]</code> - æ•°æ®ï¼ˆLL å­—èŠ‚ï¼‰</li>
                    <li><code>CC</code> - æ ¡éªŒå’Œï¼ˆ1 å­—èŠ‚ï¼‰</li>
                </ul>
            </div>
            
            <div class="note-box">
                <strong>ğŸ’¡ æŠ€æœ¯è¦ç‚¹ï¼š</strong> è§£æå™¨é‡‡ç”¨æµå¼å¤„ç†ï¼Œæ”¯æŒè¶…å¤§æ–‡ä»¶ï¼›ä½¿ç”¨å†…å­˜æ˜ å°„æŠ€æœ¯å¤„ç†åœ°å€ç©ºé—´ï¼›ä¼˜åŒ–çš„æ•°æ®ç»“æ„ç¡®ä¿å¿«é€Ÿè®¿é—®ã€‚
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2024 HexParser æŠ€æœ¯æ–‡æ¡£ - é«˜æ€§èƒ½ Intel HEX è§£æå™¨</p>
        </div>
    </div>
</body>
</html>